@{
    ViewData["Title"] = "Dashboard de Plazas (Tiempo real)";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />



<div class="dash-wrap container-fluid">
    <h2 class="dash-title"><i class="bi bi-speedometer2"></i> Dashboard de Plazas Activas</h2>

    <div class="dash-summary">
        <div class="summary-box">
            <h4 id="totalPlazas">0</h4>
            <p>Plazas activas</p>
        </div>
        <div class="summary-box">
            <h4 id="totalPostulantes">0</h4>
            <p>Postulantes totales</p>
        </div>
        <div class="summary-box">
            <h4 id="ultimaActualizacion">--:--:--</h4>
            <p>Última actualización</p>
        </div>
    </div>

    <div class="dash-controls">
        <div class="dash-search input-group">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input id="q" class="form-control" placeholder="Buscar por plaza o departamento..." />
        </div>

        <div class="btn-group" role="group" aria-label="Agrupar por">
            <input type="radio" class="btn-check" name="groupBy" id="byPlaza" value="plaza" checked>
            <label class="btn btn-outline-secondary" for="byPlaza"><i class="bi bi-briefcase"></i> Por plaza</label>

            <input type="radio" class="btn-check" name="groupBy" id="byDepto" value="departamento">
            <label class="btn btn-outline-secondary" for="byDepto"><i class="bi bi-building"></i> Por departamento</label>
        </div>

        <button id="refresh" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-repeat"></i> Actualizar
        </button>
    </div>

    <div id="cards" class="cards-grid"></div>

    <p class="text-muted mt-3 text-center">
        <small>🔄 Se actualiza automáticamente cada 15 segundos.</small>
    </p>
</div>


@section Scripts {
    <script>
        window.dashboardCountsUrl = '@Url.Action("Counts", "Dashboard")';
        window.seguimientoBaseUrl = '@Url.Action("PorPlaza", "Seguimiento")';
    </script>
    <script src="~/js/dashboard.js" asp-append-version="true"></script>
}

